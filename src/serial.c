
/*---------------------------------------------------------------------*
 *                                                                     *
 *                         GBC Serial Transfer                         *
 *                                                                     *
 *                                                                     *
 *       project: Gameboy Color Emulator                               *
 *   module name: serial.c                                             *
 *        author: tstr92                                               *
 *          date: 2025-04-21                                           *
 *                                                                     *
 *---------------------------------------------------------------------*/


/*---------------------------------------------------------------------*
 *  include files                                                      *
 *---------------------------------------------------------------------*/
#include "serial.h"
#include "debug.h"

/*---------------------------------------------------------------------*
 *  local definitions                                                  *
 *---------------------------------------------------------------------*/
#define SERIAL_DATA_ADDRESS      0xFF01
#define SERIAL_CTRL_ADDRESS      0xFF02
#define SERIAL_IDLE              0xFF     /* no data */

/*---------------------------------------------------------------------*
 *  external declarations                                              *
 *---------------------------------------------------------------------*/

/*---------------------------------------------------------------------*
 *  public data                                                        *
 *---------------------------------------------------------------------*/

/*---------------------------------------------------------------------*
 *  private data                                                       *
 *---------------------------------------------------------------------*/
uint8_t SERIAL_DATA = SERIAL_IDLE;
uint8_t SERIAL_CTRL = 0;

/*---------------------------------------------------------------------*
 *  private function declarations                                      *
 *---------------------------------------------------------------------*/

/*---------------------------------------------------------------------*
 *  private functions                                                  *
 *---------------------------------------------------------------------*/

/*---------------------------------------------------------------------*
 *  public functions                                                   *
 *---------------------------------------------------------------------*/
uint8_t gbc_serial_get_memory(uint16_t addr)
{
    uint8_t ret;

    ret = 0;

    switch (addr)
    {
        case SERIAL_DATA_ADDRESS:
        {
            ret = SERIAL_DATA;
        }
        break;

        case SERIAL_CTRL_ADDRESS:
        {
            ret = SERIAL_CTRL;
        }
        break;

        default:
        DBG_ERROR();
        break;
    }

    return ret;
}

void gbc_serial_set_memory(uint16_t addr, uint8_t val)
{
    switch (addr)
    {
        case SERIAL_DATA_ADDRESS:
        /* nothing to do (for now) */
        break;

        case SERIAL_CTRL_ADDRESS:
        {
            SERIAL_CTRL = val;
        }
        break;

        default:
        DBG_ERROR();
        break;
    }
}

/*---------------------------------------------------------------------*
 *  eof                                                                *
 *---------------------------------------------------------------------*/
